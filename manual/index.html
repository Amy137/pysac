<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Manual - PySAC</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Manual";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> PySAC</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../index.html">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="index.html">Manual</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#package-organization">Package Organization</a></li>
                
                    <li><a class="toctree-l4" href="#pysacheader">pysac.header</a></li>
                
                    <li><a class="toctree-l4" href="#pysacutil">pysac.util</a></li>
                
                    <li><a class="toctree-l4" href="#pysacarrayio">pysac.arrayio</a></li>
                
                    <li><a class="toctree-l4" href="#pysacsactrace">pysac.sactrace</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>About</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../license/index.html">License</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../obspy/index.html">ObsPy</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PySAC</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      
    
    <li>Manual</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/jkmacc-LANL/pysac" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="package-organization">Package Organization<a class="headerlink" href="#package-organization" title="Permanent link">&para;</a></h1>
<h2 id="pysacheader">pysac.header<a class="headerlink" href="#pysacheader" title="Permanent link">&para;</a></h2>
<p>SAC header specification, including documentation.</p>
<p>Header names, order, and types, nulls, as well as allowed enumerated values, are
specified here.  Header name strings, and their array order are contained in
separate float, int, and string tuples.  Enumerated values, and their allowed
string and integer values, are in dictionaries.  Header value documentation is
in a dictionary, <code>DOC</code>, for reuse throughout the package.</p>
<h2 id="pysacutil">pysac.util<a class="headerlink" href="#pysacutil" title="Permanent link">&para;</a></h2>
<p>PySAC helper functions and data.  Contains functions to validate and convert
enumerated values, byteorder consistency checking, and SAC reference time
reading.</p>
<p>Two of the most important functions in this module are <code>sac_to_obspy_header</code>
and <code>obspy_to_sac_header</code>.  These contain the conversion routines between SAC
header dictionaries and ObsPy header dictionaries.  <strong>These functions control
the way ObsPy reads and writes SAC files,</strong> which was one of the main
motivations for authoring this package.</p>
<h2 id="pysacarrayio">pysac.arrayio<a class="headerlink" href="#pysacarrayio" title="Permanent link">&para;</a></h2>
<p>Low-level array interface to the SAC file format.</p>
<p>Functions in this module work directly with numpy arrays that mirror the SAC
format, and comprise much of the machinery that underlies the <code>SACTrace</code> class.
The 'primitives' in this module are the float, int, and string header arrays,
the float data array, and a header dictionary. Convenience functions are
provided to convert between header arrays and more user-friendly dictionaries.</p>
<p>These read/write routines are very literal; there is almost no value or type
checking, except for byteorder and header/data array length.  File- and array-
based checking routines are provided for additional checks where desired.</p>
<p>Reading and writing are done with <code>read_sac</code> and <code>write_sac</code> for binary SAC
files, and <code>read_sac_ascii</code> and <code>write_sac_ascii</code> for alphanumeric files.
Conversions between header dictionaries and the three SAC header arrays are done
with the <code>header_arrays_to_dict</code> and <code>dict_to_header_arrays</code> functions.
Validation of header values and data is managed by <code>validate_sac_content</code>,
which can currently do six different tests.</p>
<h2 id="pysacsactrace">pysac.sactrace<a class="headerlink" href="#pysacsactrace" title="Permanent link">&para;</a></h2>
<p>Contains the <code>SACTrace</code> class, which is the main user-facing interface to the
SAC file format.</p>
<p>The <code>SACTrace</code> object maintains consistency between SAC headers and manages
header values in a user-friendly way. This includes some value-checking, native
Python logicals and nulls instead of SAC's header-dependent logical/null
representation.</p>
<h3 id="reading-and-writing-sac-files">Reading and writing SAC files<a class="headerlink" href="#reading-and-writing-sac-files" title="Permanent link">&para;</a></h3>
<p>PySAC can read and write evenly-spaced time-series files.  It supports big or
little-endian binary files, or alphanumeric/ASCII files.</p>
<pre><code class="python"># read from a binary file
sac = SACTrace.read(filename)

# read header only
sac = SACTrace.read(filename, headonly=True)

# write header-only, file must exist
sac.write(filename, headonly=True)

# read from an ASCII file
sac = SACTrace.read(filename, ascii=True)

# write a binary SAC file for a Sun machine
sac.write(filename, byteorder='big')
</code></pre>

<h3 id="headers">Headers<a class="headerlink" href="#headers" title="Permanent link">&para;</a></h3>
<p>In the <code>SACTrace</code> class, SAC headers are implemented as properties, with
appropriate <em>getters</em> and <em>setters</em>.  The getters/setters translate user-facing
native Python values like <code>True</code>, <code>False</code>, and <code>None</code> to the appropriate SAC
header values, like <code>1</code>, <code>0</code>, <code>-12345</code>, <code>'-12345   '</code>, etc.  </p>
<p>Header values that depend on the SAC <code>.data</code> vector are calculated on-the-fly,
and fall back to the stored header value.</p>
<p>A convenient read-only dictionary of non-null, raw SAC header values is
available as <code>SACTrace._header</code>.  Formatted non-null headers are viewable using
<code>print(sac)</code> or the <code>.lh()</code> or <code>listhdr()</code> methods.  Relative time headers and
picks are viewable with <code>lh('picks')</code>.</p>
<h3 id="reference-time-and-relative-time-header-handling">Reference time and relative time header handling<a class="headerlink" href="#reference-time-and-relative-time-header-handling" title="Permanent link">&para;</a></h3>
<p>The SAC reference time is built from "nz..." time fields in the header, and it
is available as the attribute <code>.reftime</code>, an ObsPy <code>UTCDateTime</code> instance.
<code>reftime</code> can be modified in two ways: by resetting it with a new absolute
<code>UTCDateTime</code> instance, or by adding/subtracting seconds from it.  <strong>Modifying
the <code>reftime</code> will also modify all relative time headers such that they are
still correct in an absolute sense</strong>.  This includes
<code>a</code>, <code>b</code>, <code>e</code>, <code>f</code>, <code>o</code>, and <code>t1</code>-<code>t9</code>.  This means that adjusting the
reference time does not invalidate the origin time, the first sample time, or
any picks!</p>
<p>Here, we build a 100-second <code>SACTrace</code> that starts at Y2K.</p>
<pre><code class="python">sac = SACTrace(nzyear=2000, nzjday=1, nzhour=0, nzmin=0, nzsec=0, nzmsec=0,
               t1=23.5, data=numpy.arange(101))

sac.reftime
sac.b, sac.e, sac.t1
</code></pre>

<pre><code>2000-01-01T00:00:00.000000Z
(0.0, 100.0, 23.5)
</code></pre>

<p>Move reference time by relative seconds, relative time headers are preserved.</p>
<pre><code class="python">sac.reftime -= 2.5
sac.b, sac.e, sac.t1
</code></pre>

<pre><code>(2.5, 102.5, 26.0)
</code></pre>

<p>Set reference time to new absolute time, two minutes later.  Relative time
 headers are preserved.</p>
<pre><code class="python">sac.reftime = UTCDateTime(2000, 1, 1, 0, 2, 0, 0)
sac.b, sac.e
</code></pre>

<pre><code>(-120.0, -20.0, -96.5)
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../license/index.html" class="btn btn-neutral float-right" title="License"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../license/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
